(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{10375:(e,t,o)=>{Promise.resolve().then(o.bind(o,91605))},91605:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>er});var s=o(57437),n=o(2265),r=o(79778),l=o(29837),a=o(69),c=o(8394),i=o(11838),d=o.n(i);let u=e=>e.replace(/\*+/g,""),m=(e,t)=>{let o;let s=[],n=0,r=/["“][^"“]*?["”]/g;for(;null!==(o=r.exec(e));){let l=o.index,a=r.lastIndex;if(l>n){let o=e.substring(n,l);s.push('<span style="'.concat(t.normal.useCustomCSS?t.normal.customCSS:"color:"+t.normal.color,'">').concat(o,"</span>"))}s.push('<span style="'.concat(t.doubleQuote.useCustomCSS?t.doubleQuote.customCSS:"color:"+t.doubleQuote.color,';">').concat(o[0],"</span>")),n=a}if(n<e.length){let o=e.substring(n);s.push('<span style="'.concat(t.normal.useCustomCSS?t.normal.customCSS:"color:"+t.normal.color,'">').concat(o,"</span>"))}return s.join("")},x=(e,t,o)=>{let s=[],n=[];if(e.split("\n").forEach(e=>{if(e.trim()){let t=m(e,o.text);n.push(function(e,t){return e=(e=(e=(e=e.replace(/['‘](.*?)['’]/g,"<span style='".concat(t.singleQuote.useCustomCSS?t.singleQuote.customCSS:"color:"+t.singleQuote.color,"'>$1</span>"))).replace(/\*\*\*(.*?)\*\*\*/g,"<span style='".concat(t.italicBold.useCustomCSS?t.italicBold.customCSS:"font-style:italic; font-weight:bold; color:"+t.italicBold.color,"'>$1</span>"))).replace(/\*\*(.*?)\*\*/g,"<span style='".concat(t.bold.useCustomCSS?t.bold.customCSS:"font-weight:bold; color:"+t.bold.color,"'>$1</span>"))).replace(/\*(.*?)\*/g,"<span style='".concat(t.italic.useCustomCSS?t.italic.customCSS:"font-style:italic; color:"+t.italic.color,"'>$1</span>"))}(t,o.text))}else if(n.length>0){let e=n.join("<br/>");s.push(o.box.isCustomMode?o.box.customPTag.replaceAll("{{line}}",e):'<p style="margin: 1.25em 0">'.concat(e,"</p>")),n=[]}}),n.length>0){let e=n.join("<br/>");s.push(o.box.isCustomMode?o.box.customPTag.replaceAll("{{line}}",e):'<p style="margin: 1.25em 0">'.concat(e,"</p>"))}return t.removeAsterisk?u(s.join("\n")):s.join("\n")},h=(e,t,o)=>{let s="bot"===t.selectedMode?t.botName:t.personaName,n="character"in o?"bot"===t.selectedMode?o.character:o.persona:o,r=x(e.trim(),t,n);if(!n.box.isCustomMode)return'<div style="max-width: 800px; border-radius: '.concat(n.box.borderRadius,"px; margin: 0 auto; padding: 2rem; box-shadow: ").concat(n.box.shadow.x,"px ").concat(n.box.shadow.y,"px ").concat(n.box.shadow.blur,"px ").concat(n.box.shadow.spread,"px ").concat(n.box.shadow.color,"; background-color: ").concat(n.box.backgroundColor,';"><span style="font-size: 1.25rem; line-height: 1.75rem; color: ').concat(n.text.normal.color,';">').concat(s,"</span>").concat(r,"</div>");let l=[[/\{\{image(?:::(.*?))?\}\}/g,n.box.customImages],[/\{\{text(?:::(.*?))?\}\}/g,n.box.customTexts],[/\{\{color(?:::(.*?))?\}\}/g,n.box.customColors]],a=n.box.customHTML;for(let e=0;e<3;e++){let t=0;a=a.replace(l[e][0],()=>l[e][1][t++]||"")}let c=a.replaceAll("{{content}}",r).replaceAll("{{name}}","bot"===t.selectedMode?t.botName:t.personaName).replaceAll("\n","");return d().sanitize(c).trim()};var p=o(96488),g=o.n(p),C=o(44785);let b="app_state",j={expires:30,path:"/"},y=e=>g().compressToBase64(JSON.stringify(e)),f=e=>{try{let t=g().decompressFromBase64(e);return t?JSON.parse(t):null}catch(e){return console.error("Failed to decompress data:",e),null}},S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;try{let o=y(e);C.Z.set(b,o,t)}catch(e){console.error("Failed to save state to storage:",e)}},v=()=>C.Z.get(b),Z=()=>{try{let e=v();if(!e)return null;return f(e)}catch(e){return console.error("Failed to load state from storage:",e),null}},T=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j;try{let s={...Z()||{},[e]:t};S(s,o)}catch(e){console.error("Failed to update state in storage:",e)}};var w=o(16463),M=o(69569),k=o(77733),B=o(95381),A=o(73454),L=o(71423),I=o(58250),H=o(51501),$=o(27840),F=o(97673),N=o(85668),E=o(44052);let P=e=>{let{removeAsterisk:t,botName:o,personaName:n,selectedMode:r,preview:l,changeMode:a,onConfigChange:c}=e;return(0,s.jsx)(A.Z,{layout:"vertical",children:(0,s.jsxs)(k.Z,{gutter:[16,16],align:"middle",children:[(0,s.jsx)(B.Z,{xs:24,sm:6,children:(0,s.jsxs)(A.Z.Item,{style:{marginBottom:0},children:[(0,s.jsx)(N.Z,{checked:t,onChange:e=>c("removeAsterisk",e.target.checked),children:"애스터리스크(*) 제거"}),(0,s.jsx)(N.Z,{checked:l,onChange:e=>c("preview",e.target.checked),children:"변환 결과 렌더링"})]})}),(0,s.jsx)(B.Z,{xs:24,sm:6,children:(0,s.jsx)(A.Z.Item,{label:"봇 이름",style:{marginBottom:0},children:(0,s.jsx)(M.default,{value:o,onChange:e=>c("botName",e.target.value),placeholder:"봇 이름을 입력하세요"})})}),(0,s.jsx)(B.Z,{xs:24,sm:6,children:(0,s.jsx)(A.Z.Item,{label:"페르소나 이름",style:{marginBottom:0},children:(0,s.jsx)(M.default,{value:n,onChange:e=>c("personaName",e.target.value),placeholder:"페르소나 이름을 입력하세요"})})}),(0,s.jsx)(B.Z,{xs:24,sm:6,children:(0,s.jsxs)(A.Z.Item,{label:"모드 선택",style:{marginBottom:0},children:[(0,s.jsxs)(E.ZP.Group,{value:r,onChange:e=>c("selectedMode",e.target.value),children:[(0,s.jsx)(E.ZP,{value:"bot",children:"봇"}),(0,s.jsx)(E.ZP,{value:"persona",children:"페르소나"})]}),(0,s.jsx)(N.Z,{value:a,onChange:e=>c("changeMode",e.target.checked),children:"변환 후 모드 자동 변경"})]})})]})})};var z=o(37469),Q=o(23288),O=o(29114),R=o(66939),_=o(61015),U=o(37270);let q=e=>{let{customHTML:t,customColors:o,customTexts:r,customImages:l,onCustomColorsChange:a,onCustomTextsChange:c,onCustomImagesChange:i}=e,[d,u]=(0,n.useState)([]),m={width:"100px",display:"inline-block",marginRight:"8px"},x={width:"100%",height:"32px",borderRadius:"4px",cursor:"pointer",border:"1px solid #d9d9d9"};return(0,s.jsxs)(s.Fragment,{children:[(()=>{let e=Array.from(t.matchAll(/\{\{color(?:::(.*?))?\}\}/g));return e.length?(0,s.jsxs)(k.Z,{gutter:[8,8],style:{marginBottom:24},children:[(0,s.jsx)(B.Z,{span:24,children:(0,s.jsx)("span",{style:m,children:"Custom Color"})}),e.map((e,t)=>(0,s.jsxs)(n.Fragment,{children:[e[1]&&(0,s.jsx)(B.Z,{children:e[1]}),(0,s.jsxs)(B.Z,{span:24,children:[(0,s.jsx)("div",{style:{...x,backgroundColor:o[t]},onClick:()=>{u(o.map((e,o)=>o===t&&!d[t]))}}),d[t]&&(0,s.jsx)("div",{style:{position:"absolute",zIndex:1,marginTop:8},children:(0,s.jsx)(_.AI,{color:o[t],onChange:e=>{let s=[...o];s[t]="rgba(".concat(e.rgb.r,", ").concat(e.rgb.g,", ").concat(e.rgb.b,", ").concat(e.rgb.a,")"),a(s)}})})]})]},"color-".concat(t)))]}):null})(),(()=>{let e=Array.from(t.matchAll(/\{\{text(?:::(.*?))?\}\}/g));return e.length?(0,s.jsxs)(k.Z,{gutter:[8,8],style:{marginBottom:24},children:[(0,s.jsx)(B.Z,{span:24,children:(0,s.jsx)("span",{style:m,children:"Custom Text"})}),e.map((e,t)=>(0,s.jsx)(B.Z,{span:24,children:(0,s.jsx)(M.default,{value:r[t],addonBefore:e[1],onChange:e=>{let o=[...r];o[t]=e.target.value,c(o)}})},"text-".concat(t)))]}):null})(),(()=>{let e=Array.from(t.matchAll(/\{\{image(?:::(.*?))?\}\}/g));return e.length?(0,s.jsxs)(k.Z,{gutter:[8,8],style:{marginBottom:24},children:[(0,s.jsx)(B.Z,{span:24,children:(0,s.jsx)("span",{style:m,children:"Custom Image"})}),e.map((e,t)=>(0,s.jsx)(B.Z,{span:24,children:(0,s.jsx)(M.default,{value:l[t],addonBefore:e[1],onChange:e=>{let o=[...l];o[t]=e.target.value,i(o)}})},"image-".concat(t)))]}):null})()]})},{Title:J}=r.default,D=e=>{let{boxCustom:t,setBoxCustom:o}=e,[l,a]=(0,n.useState)(!1),[c,i]=(0,n.useState)(!1),{isCustomMode:d,customHTML:u,backgroundColor:m,borderRadius:x,shadow:h,customPTag:p,customImages:g,customColors:C,customTexts:b}=t;(0,n.useEffect)(()=>{if(d&&!u){let e='<div style="max-width: 800px;\nmargin: 0 auto;\npadding: 2rem;\nborder-radius: '.concat(x,"px;\nbox-shadow: ").concat(h.x,"px ").concat(h.y,"px ").concat(h.blur,"px ").concat(h.spread,'px {{color::박스 그림자 색깔}};\nbackground-color: {{color::박스 배경 색깔}};\n">\n  <span style="font-size: 1.25rem;\n  line-height: 1.75rem;\n  color: {{color::이름 색깔}};">\n    {{name}}\n  </span>\n  {{content}}\n</div>');o({...t,customHTML:e})}d&&!p&&o({...t,customPTag:'<p style="margin:1.2rem 0;">{{line}}</p>'})},[d]),(0,n.useEffect)(()=>{let e=[...u.matchAll(/\{\{color(?:::(.*?))?\}\}/g)].length;for(let t=0;t<e;t++)C[t]||(C[t]="#ffffff")},[u]);let j={width:"100%",height:"32px",borderRadius:"4px",cursor:"pointer",border:"1px solid #d9d9d9"},y={width:"100px",display:"inline-block",marginRight:"8px"};return(0,s.jsx)(z.Z,{title:"Box Customizer",extra:(0,s.jsxs)(Q.Z,{children:[(0,s.jsx)("span",{children:"Custom HTML"}),(0,s.jsx)(L.Z,{checked:d,onChange:e=>o({...t,isCustomMode:e})})]}),children:(0,s.jsx)(k.Z,{gutter:32,children:(0,s.jsx)(B.Z,{flex:"1",children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(U.ZP,{height:"400px",defaultLanguage:"html",value:u,onChange:e=>{let s=Array.from(u.matchAll(/\{\{image(?:::(.*?))?\}\}/g)),n=Array.from(u.matchAll(/\{\{text(?:::(.*?))?\}\}/g)),r=Array.from(u.matchAll(/\{\{color(?:::(.*?))?\}\}/g));o({...t,customHTML:e||"",customImages:t.customImages.slice(0,s.length),customTexts:t.customTexts.slice(0,n.length),customColors:t.customColors.slice(0,r.length)})},options:{minimap:{enabled:!1},fontSize:14}}),(0,s.jsx)(q,{customHTML:u,customColors:C,customTexts:b,customImages:g,onCustomColorsChange:e=>o({...t,customColors:e}),onCustomTextsChange:e=>o({...t,customTexts:e}),onCustomImagesChange:e=>o({...t,customImages:e})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{style:y,children:"Custom P Tag"}),(0,s.jsx)(M.default,{value:p,status:p.includes("{{line}}")?void 0:"warning",onChange:e=>o({...t,customPTag:e.target.value})}),!p.includes("{{line}}")&&(0,s.jsx)(r.default.Text,{type:"warning",children:"'{{line}}'이 포함되어 있지 않습니다. 본문 출력을 위해선 '{{line}}'을 포함시켜야 합니다."})]})]}):(0,s.jsxs)(Q.Z,{direction:"vertical",style:{width:"100%"},size:"large",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(J,{level:5,children:"Background Color"}),(0,s.jsx)("div",{style:{...j,backgroundColor:m},onClick:()=>a(!l)}),l&&(0,s.jsx)("div",{style:{position:"absolute",zIndex:1,marginTop:8},children:(0,s.jsx)(_.AI,{color:m,onChange:e=>o({...t,backgroundColor:"rgba(".concat(e.rgb.r,", ").concat(e.rgb.g,", ").concat(e.rgb.b,", ").concat(e.rgb.a,")")})})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(J,{level:5,children:"Border Radius (px)"}),(0,s.jsx)(O.Z,{min:0,max:100,value:x,onChange:e=>o({...t,borderRadius:e})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(J,{level:5,children:"Box Shadow"}),(0,s.jsxs)(Q.Z,{direction:"vertical",style:{width:"100%"},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{style:y,children:"X Offset:"}),(0,s.jsx)(R.Z,{suffix:"px",value:h.x,onChange:e=>o({...t,shadow:{...t.shadow,x:e||0}})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{style:y,children:"Y Offset:"}),(0,s.jsx)(R.Z,{suffix:"px",value:h.y,onChange:e=>o({...t,shadow:{...t.shadow,y:e||0}})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{style:y,children:"Blur:"}),(0,s.jsx)(R.Z,{suffix:"px",value:h.blur,onChange:e=>o({...t,shadow:{...t.shadow,blur:e||0}})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{style:y,children:"Spread:"}),(0,s.jsx)(R.Z,{suffix:"px",value:h.spread,onChange:e=>o({...t,shadow:{...t.shadow,spread:e||0}})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(J,{level:5,children:"Shadow Color"}),(0,s.jsx)("div",{style:{...j,backgroundColor:t.shadow.color},onClick:()=>i(!c)}),c&&(0,s.jsx)("div",{style:{position:"absolute",zIndex:1,marginTop:8},children:(0,s.jsx)(_.AI,{color:h.color,onChange:e=>o({...t,shadow:{...h,color:"rgba(".concat(e.rgb.r,", ").concat(e.rgb.g,", ").concat(e.rgb.b,", ").concat(e.rgb.a,")")}})})})]})]})]})]})})})})},{Text:K}=r.default,V=e=>{let{textStyles:t,setTextStyles:o}=e,[r,l]=(0,n.useState)({normal:!1,italic:!1,bold:!1,italicBold:!1,singleQuote:!1,doubleQuote:!1}),a=e=>{t[e].useCustomCSS=!t[e].useCustomCSS,t[e].customCSS=t[e].useCustomCSS||""!=t[e].customCSS?t[e].customCSS:"color: ".concat(t[e].color),o(t),r[e]||l(t=>({...t,[e]:!1}))},c=(e,s)=>{t[e].customCSS=s,o(t)},i=(e,s)=>{t[e].color="rgba(".concat(s.rgb.r,", ").concat(s.rgb.g,", ").concat(s.rgb.b,", ").concat(s.rgb.a,")"),o(t)},d=e=>{l(t=>({...t,[e]:!t[e]}))},u=e=>e.trim()?e.split(";").filter(e=>e.trim()).reduce((e,t)=>{let[o,s]=t.split(":").map(e=>e.trim());if(!o||!s)return e;let n=o.replace(/-([a-z])/g,e=>e[1].toUpperCase());return{...e,[n]:s}},{}):{},m=(e,t)=>{if(t.useCustomCSS)return u(t.customCSS);let o={color:t.color};switch(e){case"italic":return{...o,fontStyle:"italic"};case"bold":return{...o,fontWeight:"bold"};case"italicBold":return{...o,fontStyle:"italic",fontWeight:"bold"};default:return o}};return(0,s.jsx)(z.Z,{title:"Text Style Customizer",styles:{body:{padding:"4px"}},children:Object.entries(t).map(e=>{let[t,o]=e;return(0,s.jsxs)("div",{className:"md:p-8 p-[4px]",style:{border:"1px solid #f0f0f0",borderRadius:"8px"},children:[(0,s.jsxs)(k.Z,{gutter:[16,16],align:"middle",style:{marginBottom:"12px"},children:[(0,s.jsx)(B.Z,{xs:24,sm:8,md:6,lg:4,children:(0,s.jsx)(K,{strong:!0,children:t})}),(0,s.jsx)(B.Z,{xs:12,sm:8,md:6,lg:4,children:!o.useCustomCSS&&(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)(I.ZP,{style:{backgroundColor:o.color,width:"60px",height:"32px",border:"1px solid #d9d9d9"},onClick:()=>d(t)}),r[t]&&(0,s.jsx)("div",{style:{position:"absolute",zIndex:2,marginTop:"8px"},children:(0,s.jsx)(_.AI,{color:o.color,onChange:e=>i(t,e)})})]})}),(0,s.jsx)(B.Z,{xs:12,sm:8,md:6,lg:4,children:(0,s.jsxs)(Q.Z,{children:[(0,s.jsx)(L.Z,{checked:o.useCustomCSS,onChange:()=>a(t)}),(0,s.jsx)(K,{children:"CSS Custom"})]})})]}),(0,s.jsxs)(k.Z,{gutter:[16,16],align:"middle",children:[(0,s.jsx)(B.Z,{xs:24,lg:12,children:o.useCustomCSS&&(0,s.jsx)(M.default,{value:o.customCSS,onChange:e=>c(t,e.target.value),placeholder:"color: #88E9FD; font-size: 12px;"})}),(0,s.jsx)(B.Z,{xs:24,lg:12,children:(0,s.jsx)("div",{style:{padding:"8px",background:"#fafafa",borderRadius:"4px",minHeight:"40px",display:"flex",alignItems:"center"},children:(0,s.jsx)(K,{style:m(t,o),children:t})})})]})]},t)})})},W=e=>{let{title:t="캐릭터",custom:o,setCustom:n}=e;return(0,s.jsxs)(z.Z,{title:t,children:[(0,s.jsx)(k.Z,{style:{marginBottom:"24px"},children:(0,s.jsx)(B.Z,{span:24,style:{maxHeight:500,overflow:"auto"},children:(()=>{let e=h('벌써 내 때 그대에게 "*망각*의 너도 잠", 나 백 추억과 한 쌓인 시인의 기억해주오 지우지 언제나 망각의 것 생명을 모든 것을 비로소 쉬이 아직 그대에게 것이다.\n\n흙으로 흙이 없든 약산 노루, 잊지 내일 언제나 바다로 강물과 푸른 듯합니다. "푸른 아침이 내일 척 떨어진다." 생명들 **저녁** 아니 슬퍼하는 오신다면 붉은 가시옵소서. 박명의 이었다.\n\n모래 ***진달래꽃*** 프랑시스 하염없이 이름과, 알리라, 것을 즈려 날에, 까닭이요, 놓인 누워 먹이고 하늘에는 겨울이 까닭이요, "푸른 책상을 많은 때 나를 해일에 아름따다 내 합니다."',{removeAsterisk:!0,preview:!1,botName:"봇 이름",personaName:"페르소나 이름",selectedMode:"캐릭터"==t?"bot":"persona",changeMode:!1},o);return(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:e}})})()})}),(0,s.jsx)(k.Z,{style:{marginBottom:"24px"},children:(0,s.jsx)(B.Z,{span:24,children:(0,s.jsx)(D,{boxCustom:o.box,setBoxCustom:e=>n({...o,box:e})})})}),(0,s.jsx)(k.Z,{style:{marginBottom:"24px"},children:(0,s.jsx)(B.Z,{span:24,children:(0,s.jsx)(V,{textStyles:o.text,setTextStyles:e=>{n({...o,text:e})}})})})]})},G=(e,t)=>{let o=Object.assign({},e);return o.character.box.customHTML=d().sanitize(e.character.box.customHTML),o.persona.box.customHTML=d().sanitize(e.persona.box.customHTML),"javascript: (() => {\n    const custom = ".concat(JSON.stringify(o),";\n    const config = ").concat(JSON.stringify(t),';\n\n    const processText = (text, isCharacter, name) => {\n      const paragraphs = [];\n      const currentLines = [];\n      const selectedCustom = isCharacter ? custom.character : custom.persona;\n      text.split("\\n").forEach(line => {\n        if (line.trim()) {\n          let processedLine = line;\n          \n          const parts = [];\n          let lastEnd = 0;\n          const regex = /["“][^"”]*?["”]/g;\n          let match;\n\n          while ((match = regex.exec(line)) !== null) {\n            const start = match.index;\n            const end = regex.lastIndex;\n\n            if (start > lastEnd) {\n              const narration = line.substring(lastEnd, start);\n              parts.push(\n                `<span style="${\n                  selectedCustom.text.normal.useCustomCSS\n                    ? selectedCustom.text.normal.customCSS\n                    : "color:" + selectedCustom.text.normal.color\n                }">${narration}</span>`\n              );\n            }\n\n            parts.push(\n              `<span style="${\n                selectedCustom.text.doubleQuote.useCustomCSS\n                  ? selectedCustom.text.doubleQuote.customCSS\n                  : "color:" + selectedCustom.text.doubleQuote.color\n              }">${match[0]}</span>`\n            );\n            lastEnd = end;\n          }\n\n          if (lastEnd < line.length) {\n            const narration = line.substring(lastEnd);\n            parts.push(\n              `<span style="${\n                selectedCustom.text.normal.useCustomCSS\n                  ? selectedCustom.text.normal.customCSS\n                  : "color:" + selectedCustom.text.normal.color\n              }">${narration}</span>`\n            );\n          }\n\n          processedLine = parts.join("");\n\n          processedLine = processedLine.replace(\n            /[\'\'](.*?)[\'\']/g,\n            `<span style=\'${\n              selectedCustom.text.singleQuote.useCustomCSS\n                ? selectedCustom.text.singleQuote.customCSS\n                : "color:" + selectedCustom.text.singleQuote.color\n            }\'>$1</span>`\n          );\n\n          processedLine = processedLine.replace(\n            /\\*\\*\\*(.*?)\\*\\*\\*/g,\n            `<span style=\'${\n              selectedCustom.text.italicBold.useCustomCSS\n                ? selectedCustom.text.italicBold.customCSS\n                : "font-style:italic; font-weight:bold; color:" + selectedCustom.text.italicBold.color\n            }\'>$1</span>`\n          );\n\n          processedLine = processedLine.replace(\n            /\\*\\*(.*?)\\*\\*/g,\n            `<span style=\'${\n              selectedCustom.text.bold.useCustomCSS\n                ? selectedCustom.text.bold.customCSS\n                : "font-weight:bold; color:" + selectedCustom.text.bold.color\n            }\'>$1</span>`\n          );\n\n          processedLine = processedLine.replace(\n            /\\*(.*?)\\*/g,\n            `<span style=\'${\n              selectedCustom.text.italic.useCustomCSS\n                ? selectedCustom.text.italic.customCSS\n                : "font-style:italic; color:" + selectedCustom.text.italic.color\n            }\'>$1</span>`\n          );\n\n          currentLines.push(processedLine);\n        } else if (currentLines.length > 0) {\n          const paragraph = currentLines.join("<br/>");\n          paragraphs.push(\n            selectedCustom.box.isCustomMode\n              ? selectedCustom.box.customPTag.replaceAll("{{line}}", paragraph)\n              : `<p style="margin: 1.25em 0">${paragraph}</p>`\n          );\n          currentLines.length = 0;\n        }\n      });\n\n      if (currentLines.length > 0) {\n        const paragraph = currentLines.join("<br/>");\n        paragraphs.push(\n          selectedCustom.box.isCustomMode\n            ? selectedCustom.box.customPTag.replaceAll("{{line}}", paragraph)\n            : `<p style="margin: 1.25em 0">${paragraph}</p>`\n        );\n      }\n\n      let result = paragraphs.join("\\n");\n\n      if (config.removeAsterisk) {\n        result = result.replace(/\\*+/g, "");\n      }\n\n      if (!selectedCustom.box.isCustomMode) {\n        result = `<div style="max-width: 800px; border-radius: ${selectedCustom.box.borderRadius}px; margin: 0 auto; padding: 2rem; box-shadow: ${selectedCustom.box.shadow.x}px ${selectedCustom.box.shadow.y}px ${selectedCustom.box.shadow.blur}px ${selectedCustom.box.shadow.spread}px ${selectedCustom.box.shadow.color}; background-color: ${selectedCustom.box.backgroundColor};"><span style="font-size: 1.25rem; line-height: 1.75rem; color: ${selectedCustom.text.normal.color};">${name}</span>${result}</div>`;\n      } else {\n        const arr = [\n          [/\\{\\{image(?:::(.*?))?\\}\\}/g, selectedCustom.box.customImages],\n          [/\\{\\{text(?:::(.*?))?\\}\\}/g, selectedCustom.box.customTexts],\n          [/\\{\\{color(?:::(.*?))?\\}\\}/g, selectedCustom.box.customColors],\n        ];\n\n        let cbsHTML = selectedCustom.box.customHTML;\n        for (let i = 0; i < 3; i++) {\n          let index = 0;\n          cbsHTML = cbsHTML.replace(arr[i][0], () => arr[i][1][index++] || "");\n        }\n\n        result = cbsHTML\n          .replaceAll("{{content}}", result)\n          .replaceAll("{{name}}", name)\n          .replaceAll("\\n", "");\n      }\n\n      return result;\n    };\n\n    const copyToClipboard = (html) => {\n      const textarea = document.createElement("textarea");\n      textarea.value = html;\n      textarea.style.position = "fixed";\n      textarea.style.left = "-9999px";\n      document.body.appendChild(textarea);\n      textarea.select();\n      try {\n        document.execCommand("copy");\n      } catch (err) {\n        console.error("Failed to copy", err);\n      }\n      document.body.removeChild(textarea);\n    };\n\n   const chatToolbars = document.querySelectorAll(".chat > div.flex");\n    \n    if (chatToolbars.length > 0) {\n      chatToolbars.forEach(toolbar => {\n        toolbar.querySelectorAll(".beautify-copy-btn").forEach(btn => btn.remove());\n\n        ').concat(o.personaUseCharacterCustom?"":'const personaCopyButton = document.createElement("button");\n        personaCopyButton.className = "ml-2 hover:text-green-500 transition-colors beautify-copy-btn";\n        personaCopyButton.innerHTML = \'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-contact-round"><path d="M16 2v2"/><path d="M17.915 22a6 6 0 0 0-12 0"/><path d="M8 2v2"/><circle cx="12" cy="12" r="4"/><rect x="3" y="4" width="18" height="18" rx="2"/></svg>\';\n        \n        personaCopyButton.onclick = async (e) => {\n          const chattext = e.target.closest(".risu-chat").querySelector(".chattext");\n          const name = e.target.closest(".chat").querySelector(".chat");\n          if (!chattext) return;\n          const processedHtml = await processText(chattext.innerText, false, name.innerText);\n          copyToClipboard(processedHtml);\n        };\n        \n        toolbar.insertBefore(personaCopyButton, toolbar.firstChild);','\n\n        const botCopyButton = document.createElement("button");\n        botCopyButton.className = "ml-2 hover:text-green-500 transition-colors beautify-copy-btn";\n        botCopyButton.innerHTML = \'<svg style="pointer-events:none;" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bot-message-square"><path d="M12 6V2H8"/><path d="m8 18-4 4V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2Z"/><path d="M2 12h2"/><path d="M9 11v2"/><path d="M15 11v2"/><path d="M20 12h2"/></svg>\';\n        \n        botCopyButton.onclick = async (e) => {\n          const chattext = e.target.closest(".risu-chat").querySelector(".chattext");\n          const name = e.target.closest(".chat").querySelector(".chat");\n          if (!chattext) return;\n          const processedHtml = await processText(chattext.innerText, true, name.innerText);\n          copyToClipboard(processedHtml);\n        };\n        \n        toolbar.insertBefore(botCopyButton, toolbar.firstChild);\n      });\n    }\n  })();').replace(/\s+/g," ").replace(/[\n\r]/g,"").trim()},{TextArea:X}=M.default,{Title:Y}=r.default,ee=e=>{let{inputText:t,outputText:o,config:r,logCustom:l,overwriteStyle:a,handleLogCustomChange:c,onInputChange:i,onConfigChange:d,onConvertText:u,onCopyToClipboard:m}=e,x=(0,n.useMemo)(()=>"bot"===r.selectedMode?l.character:l.persona,[r,l]),h=e=>{let t=Object.assign({},e);"bot"===r.selectedMode?c({...l,character:{...l.character,box:t}}):"persona"===r.selectedMode&&c({...l,persona:{...l.persona,box:t}})},p=[{key:"0",label:"빠른 설정",children:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(k.Z,{children:(0,s.jsx)(B.Z,{span:24,children:(0,s.jsx)(q,{customHTML:x.box.customHTML,customColors:x.box.customColors,customTexts:x.box.customTexts,customImages:x.box.customImages,onCustomColorsChange:e=>h({...x.box,customColors:e}),onCustomTextsChange:e=>h({...x.box,customTexts:e}),onCustomImagesChange:e=>h({...x.box,customImages:e})})})})})},{key:"1",label:"디자인 수정",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.Z,{children:(0,s.jsx)(B.Z,{span:24,children:(0,s.jsx)(A.Z,{children:(0,s.jsx)(A.Z.Item,{label:"페르소나에 캐릭터와 같은 디자인 사용",children:(0,s.jsx)(L.Z,{onChange:e=>{e?c({...l,persona:JSON.parse(JSON.stringify(l.character)),personaUseCharacterCustom:e}):c({...l,personaUseCharacterCustom:e})},checked:l.personaUseCharacterCustom})})})})}),(0,s.jsxs)(k.Z,{gutter:[16,16],children:[(0,s.jsx)(B.Z,{span:l.personaUseCharacterCustom?24:12,children:(0,s.jsx)(W,{title:"캐릭터",custom:l.character,setCustom:e=>{c({...l,character:e})}})}),!l.personaUseCharacterCustom&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(B.Z,{span:12,children:(0,s.jsx)(W,{title:"페르소나",custom:l.persona,setCustom:e=>{c({...l,persona:e})}})})})]})]})}];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(k.Z,{gutter:[16,16],children:[(0,s.jsxs)(B.Z,{xs:24,md:12,children:[(0,s.jsx)(Y,{level:4,children:"텍스트 입력"}),(0,s.jsx)(X,{value:t,onChange:i,placeholder:"여기에 텍스트를 입력하세요...",style:{height:"400px",marginBottom:"16px"}})]}),(0,s.jsxs)(B.Z,{xs:24,md:12,children:[(0,s.jsx)(Y,{level:4,children:"변환된 HTML"}),(0,s.jsx)(X,{value:o,readOnly:!0,style:{height:"400px",fontFamily:"Consolas"}})]})]}),r.preview&&(0,s.jsx)(k.Z,{gutter:[16,16],justify:"center",style:{marginBottom:24},children:(0,s.jsxs)(B.Z,{span:24,children:[(0,s.jsx)(Y,{level:4,children:"변환 결과 렌더링"}),(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:o}})]})}),(0,s.jsx)(k.Z,{style:{marginBottom:"24px"},justify:"center",children:(0,s.jsx)(B.Z,{span:24,children:(0,s.jsx)(P,{preview:r.preview,removeAsterisk:r.removeAsterisk,botName:r.botName,personaName:r.personaName,selectedMode:r.selectedMode,changeMode:r.changeMode,onConfigChange:d})})}),(0,s.jsxs)(k.Z,{gutter:[16,16],justify:"center",style:{marginTop:"24px"},children:[(0,s.jsx)(B.Z,{children:(0,s.jsx)(I.ZP,{type:"primary",onClick:u,size:"large",children:"HTML 변환"})}),(0,s.jsx)(B.Z,{children:(0,s.jsx)(I.ZP,{icon:(0,s.jsx)(F.Z,{}),onClick:()=>m(o),size:"large",children:"HTML 복사"})})]}),(0,s.jsxs)(k.Z,{gutter:[16,16],justify:"center",style:{marginTop:"24px"},children:[a&&(0,s.jsx)(B.Z,{children:(0,s.jsx)(H.Z,{title:"스타일 덮어쓰기",description:"기존 데이터가 현재 스타일로 덮어쓰기 됩니다. 진행하시겠습니까?",onConfirm:a,okText:"예",cancelText:"아니오",children:(0,s.jsx)(I.ZP,{children:"스타일 저장"})})}),(0,s.jsx)(B.Z,{children:(0,s.jsx)(I.ZP,{onClick:()=>m(G(l,r)),children:"북마클릿 복사"})}),(0,s.jsx)(B.Z,{children:(0,s.jsx)(I.ZP,{onClick:()=>{m(window.location.host+window.location.pathname+"?style="+encodeURIComponent(y({logCustom:l})))},children:"스타일 공유 링크 복사"})})]}),(0,s.jsx)(k.Z,{gutter:[16,16],justify:"center",style:{marginTop:"24px"},children:(0,s.jsx)(B.Z,{span:24,children:(0,s.jsx)($.Z,{items:p,defaultActiveKey:["0"]})})})]})},{Title:et}=r.default,{Content:eo}=l.default,es=()=>({box:{backgroundColor:"#ffffff",borderRadius:4,shadow:{x:0,y:0,blur:8,spread:0,color:"#ababab"},customHTML:"",isCustomMode:!1,customPTag:'<p style="margin:1.2rem 0;">{{line}}</p>',customImages:[],customColors:[],customTexts:[]},text:{normal:{color:"#000000",customCSS:"color: #000000;",useCustomCSS:!1},doubleQuote:{color:"#8BE9FD",customCSS:"color: #8BE9FD;",useCustomCSS:!1},singleQuote:{color:"#50FA7B",customCSS:"color: #50FA7B;",useCustomCSS:!1},italic:{color:"#A0A0A0",customCSS:"color: #A0A0A0;",useCustomCSS:!1},bold:{color:"#FFB86C",customCSS:"color: #dbccbd;",useCustomCSS:!1},italicBold:{color:"#FF79C6",customCSS:"color: #FF79C6;",useCustomCSS:!1}}}),en=()=>{let e=(0,w.useSearchParams)().get("style"),[t,o]=(0,n.useState)(!1),[r,l]=(0,n.useState)(""),[i,d]=(0,n.useState)(""),[u,m]=(0,n.useState)(e?"4":"1");(0,n.useEffect)(()=>{o(!0);let e=Z();e&&(e.logCustom&&p(e.logCustom),e.config&&j(e.config))},[]),(0,n.useEffect)(()=>{if(null==e)return;let t=f(e);t&&t.logCustom&&C(t.logCustom)},[e]);let[x,p]=(0,n.useState)({character:es(),persona:es(),personaUseCharacterCustom:!0}),[g,C]=(0,n.useState)({character:es(),persona:es(),personaUseCharacterCustom:!0}),[b,j]=(0,n.useState)({removeAsterisk:!0,preview:!1,botName:"",personaName:"",selectedMode:"bot",changeMode:!1}),y=e=>{p(e),T("logCustom",e)},S=(e,t)=>{j(o=>{let s={...o,[e]:t};return T("config",s),s})},v=()=>{try{let e=h(r,b,"1"==u?x:g);d(e),b.changeMode&&S("selectedMode","bot"===b.selectedMode?"persona":"bot")}catch(e){console.error("Error during conversion:",e),a.ZP.error("변환 중 오류가 발생했습니다.")}},M=async e=>{try{await navigator.clipboard.writeText(e),a.ZP.success("HTML이 클립보드에 복사되었습니다.")}catch(e){a.ZP.error("복사 중 오류가 발생했습니다.")}},k=[{key:"1",label:"로그 제조기",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(et,{level:2,children:"로그 제조기"}),(0,s.jsx)(ee,{inputText:r,outputText:i,config:b,logCustom:x,handleLogCustomChange:y,onInputChange:e=>l(e.target.value),onConfigChange:S,onConvertText:v,onCopyToClipboard:M})]})},{key:"4",label:"공유 받은 스타일",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(et,{level:2,children:"공유 받은 스타일"}),(0,s.jsx)(ee,{inputText:r,outputText:i,config:b,logCustom:g,handleLogCustomChange:e=>C(e),onInputChange:e=>l(e.target.value),onConfigChange:S,onConvertText:v,onCopyToClipboard:M,overwriteStyle:()=>y(g)})]})}];return(0,s.jsx)(s.Fragment,{children:t&&(0,s.jsx)(eo,{children:(0,s.jsx)(c.Z,{defaultActiveKey:"1",items:k,activeKey:u,onChange:e=>m(e)})})})},er=()=>(0,s.jsx)(l.default,{style:{minHeight:"100vh",padding:"24px"},children:(0,s.jsx)(n.Suspense,{children:(0,s.jsx)(en,{})})})}},e=>{var t=t=>e(e.s=t);e.O(0,[290,130,215,744],()=>t(10375)),_N_E=e.O()}]);